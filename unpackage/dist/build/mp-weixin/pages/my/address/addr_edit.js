require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/my/address/addr_edit"],{"21f8":function(e,t,n){"use strict";n.d(t,"b",(function(){return a})),n.d(t,"c",(function(){return i})),n.d(t,"a",(function(){return r}));var r={uInput:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-input/u-input")]).then(n.bind(null,"cf8b"))},uIcon:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-icon/u-icon")]).then(n.bind(null,"67bb"))},"u-Textarea":function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u--textarea/u--textarea")]).then(n.bind(null,"64da"))},uSwitch:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-switch/u-switch")]).then(n.bind(null,"af07"))},uPicker:function(){return Promise.all([n.e("common/vendor"),n.e("uni_modules/uview-ui/components/u-picker/u-picker")]).then(n.bind(null,"1b36"))}},a=function(){var e=this,t=e.$createElement;e._self._c},i=[]},"3a98":function(e,t,n){"use strict";n.r(t);var r=n("5f96"),a=n.n(r);for(var i in r)"default"!==i&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=a.a},"4ec3":function(e,t,n){"use strict";n.r(t);var r=n("21f8"),a=n("3a98");for(var i in a)"default"!==i&&function(e){n.d(t,e,(function(){return a[e]}))}(i);n("dbd1");var o,u=n("f0c5"),c=Object(u["a"])(a["default"],r["b"],r["c"],!1,null,"16baa73f",null,!1,r["a"],o);t["default"]=c.exports},"5f96":function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=i(n("a34a")),a=n("26cb");function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,a)}function u(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,c,"next",e)}function c(e){o(i,r,a,u,c,"throw",e)}u(void 0)}))}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d={data:function(){return{show:!1,initDefault:!1,columns:[["中国","美国"],["深圳","厦门","上海","拉萨"]],columnData:[["深圳","厦门","上海","拉萨"],["得州","华盛顿","纽约","阿拉斯加"]],addressData:{address:"",mobile:"",name:"",regional:"",regional_name:"",remark:"",autoCheck:!1,auto:0},dArr:[0,0,0],manageType:""}},computed:s(s({},(0,a.mapState)({theme:function(e){return e.user.theme},regionalList:function(e){return e.user.regionalList}})),{},{loading:function(){return 0==this.regionalList.length}}),watch:l({},"addressData.autoCheck",(function(e){this.addressData.auto=e?1:0})),onLoad:function(t){var n=this;return u(r.default.mark((function a(){var i;return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(i="新增收货地址",0!=n.regionalList.length){r.next=5;break}return e.showLoading({title:"初始化地区列表中..."}),r.next=5,n.getRegionalList();case 5:"edit"===t.type&&(i="编辑收货地址",n.addressData=JSON.parse(decodeURIComponent(t.data)),1==n.addressData.auto?(n.$set(n.addressData,"autoCheck",!0),n.initDefault=!0):n.$set(n.addressData,"autoCheck",!1)),n.manageType=t.type,e.setNavigationBarTitle({title:i});case 8:case"end":return r.stop()}}),a)})))()},methods:s(s({},(0,a.mapActions)({getRegionalList:"user/getRegionalList"})),{},{changeHandler:function(e){var t=e.columnIndex,n=(e.value,e.values,e.index),r=e.picker,a=void 0===r?this.$refs.uPicker:r;0===t&&a.setColumnValues(1,this.columnData[n])},pickerConfirm:function(e){console.log("confirm",e),this.show=!1},switchChange:function(t){!t&&this.initDefault&&(this.addressData.autoCheck=!0,e.showToast({title:"至少一个默认地址",icon:"none"}))},filterRegionalList:function(e,t){var n=this;e&&t.forEach((function(t,r){t.children&&t.children.length>0&&t.children.forEach((function(t,a){t.value!=e?t.children&&t.children.length>0&&t.children.forEach((function(t,i){t.value!=e||(n.dArr=[r,a,i])})):n.dArr=[r,a,0]}))}))},chooseLocation2:function(){this.show=!0},confirmAddr:function(){var t=this;return u(r.default.mark((function n(){var a;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(a=t.addressData,a.name){n.next=4;break}return e.showToast({icon:"error",title:"请填写联系人"}),n.abrupt("return");case 4:if(/(^1[3|4|5|7|8][0-9]{9}$)/.test(a.mobile)){n.next=7;break}return e.showToast({icon:"error",title:"请输入正确的手机号码"}),n.abrupt("return");case 7:if(a.regional_name){n.next=10;break}return e.showToast({icon:"error",title:"请选择地区"}),n.abrupt("return");case 10:if(a.address){n.next=13;break}return e.showToast({icon:"error",title:"请填写住址"}),n.abrupt("return");case 13:return n.next=15,t.submitData(t.addressData);case 15:t.$utils.prePage()&&t.$utils.prePage().refreshList(t.manageType),e.showToast({icon:"success",title:"地址".concat("edit"==t.manageType?"修改":"添加","成功")}),setTimeout((function(){e.navigateBack()}),800);case 18:case"end":return n.stop()}}),n)})))()},delAddrClick:function(){var t=this;return u(r.default.mark((function n(){return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:console.log(t.addressData),e.showModal({title:"提示",content:"是否删除该地址？",success:function(){var n=u(r.default.mark((function n(a){var i;return r.default.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!a.confirm){n.next=7;break}return console.log("用户点击确定"),e.showLoading(),n.next=5,t.$api.delAddress({params:{id:t.addressData.id}});case 5:i=n.sent,1==i.code&&(t.$utils.prePage()&&t.$utils.prePage().refreshList(t.manageType),e.showToast({icon:"success",title:"删除成功"}),setTimeout((function(){e.navigateBack()}),800));case 7:case"end":return n.stop()}}),n)})));function a(e){return n.apply(this,arguments)}return a}()});case 2:case"end":return n.stop()}}),n)})))()},submitData:function(t){var n=this;return u(r.default.mark((function a(){return r.default.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return e.showLoading({title:"地址提交中..."}),r.next=3,n.$api.submitAddrData({name:t.name,mobile:t.mobile,regional:t.regional,address:t.address,remark:t.remark,address_id:t.id,auto:t.auto});case 3:r.sent;case 4:case"end":return r.stop()}}),a)})))()}})};t.default=d}).call(this,n("543d")["default"])},"88f5":function(e,t,n){"use strict";(function(e){n("0d45");r(n("66fd"));var t=r(n("4ec3"));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n("543d")["createPage"])},b4ee:function(e,t,n){},dbd1:function(e,t,n){"use strict";var r=n("b4ee"),a=n.n(r);a.a}},[["88f5","common/runtime","common/vendor"]]]);